Borrowed from https://github.com/rxi/log.c
See log.c for license info
